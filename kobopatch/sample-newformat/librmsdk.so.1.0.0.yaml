# For firmware version 4.8.10956 (daee2c4220)
# Compatible with kobopatch v0.4.0 or later


Disable orphans/widows avoidance:
  - Enabled: yes
  - Description: Enable this patch to avoid blank lines at the bottom of pages in ePub books.
  # The default values of orphans:2; widows:2; cause extra blank lines to be added
  # to some pages to avoid leaving isolated lines of a paragraph at the top or
  # bottom of a page. Enabling this patch effectively forces orphans:1; widows:1;,
  # overriding the defaults and the book's stylesheet.
  #
  # Beware that this patch might(?) intefere with related CSS properties such as
  # page-break-after:avoid; or page-break-inside:avoid;. A better solution would
  # be to edit the book's stylesheet to set orphans:1; widows:1;.
  #
  # (This patch was previously named `Fix page breaks bug`, but that bug [the long
  # paragraph bug] was fixed in firmware version 3.5.0.)
  - ReplaceBytes: {Offset: 0x295DDC, FindH: E6 D0, ReplaceH: E6 E7}
  # Alternative method
  #  - ReplaceBytes: {Offset: 0x295DDC, FindH: E6 D0, ReplaceH: 00 46}


# Multi-version patch: 3.3.0 - 4.8.10956+
Default ePub monospace font (Courier):
  - Enabled: yes
  ## Kobo devices don't come with any monospace fonts. If the book's stylesheet
  ## specifies font-family:monospace; then the ePub reader will try to use the
  ## "Courier Std" font, but even if that font were installed it wouldn't work
  ## because the pathnames used by the ePub reader to request the font are wrong.
  ##
  ## This patch lets the EPUB reader use any font with a name beginning "Courier"
  ## (e.g. Courier Prime, available at http://quoteunquoteapps.com/courierprime)
  ## as the default monospace font instead of just Adobe's Courier Std font, and
  ## also corrects the pathnames so that it can be found. If no suitably named
  ## font is installed then this patch will have no effect.
  #
  # To use a different font name, change "Courier" in the replacement string to
  # another font name prefix (7 letters max.). For example, change
  # `normal/Courier` to `normal/Dark`, `bold/Courier` to `bold/Dark`, etc. to
  # use HP's Dark Courier font available at
  # http://h20000.www2.hp.com/hpsc/swd/public/detail?swItemId=lj611en
  - FindBaseAddressString: "CourierStd.otf"
  - ReplaceString: {Offset: 0x0000, Find: "CourierStd.otf", Replace: "normal/Courier"}
  - FindBaseAddressString: "CourierStd-Bold.otf"
  - ReplaceString: {Offset: 0x0000, Find: "CourierStd-Bold.otf", Replace: "bold/Courier"}
  - FindBaseAddressString: "CourierStd-Oblique.otf"
  - ReplaceString: {Offset: 0x0000, Find: "CourierStd-Oblique.otf", Replace: "italic/Courier"}
  - FindBaseAddressString: "CourierStd-BoldOblique.otf"
  - ReplaceString: {Offset: 0x0000, Find: "CourierStd-BoldOblique.otf", Replace: "bolditalic/Courier"}


# Multi-version patch: 4.8.10956 - 4.8.10956+
Default ePub serif font (Georgia):
  - Enabled: yes
  - Description: This patch changes the default ePub serif font from "Kobo Tsukushi Mincho" to "Georgia".
  #
  # To use a different font, change "Georgia" in each of the replacement strings
  # to another font name prefix (24 letters max.). For example, change "Georgia"
  # to "Times%20New%20Roman" to use a sideloaded Times New Roman font.
  #
  - FindBaseAddressString: "/normal/KBJ-TsukuMin%20Pr6N%20RB"
  - ReplaceString: {Offset: 0x0000, Find: "/normal/KBJ-TsukuMin%20Pr6N%20RB", Replace: "/normal/Georgia"}
  - FindBaseAddressString: "/bold/KBJ-TsukuMin%20Pr6N%20RB"
  - ReplaceString: {Offset: 0x0000, Find: "/bold/KBJ-TsukuMin%20Pr6N%20RB", Replace: "/bold/Georgia"}
  - FindBaseAddressString: "/italic/KBJ-TsukuMin%20Pr6N%20RB"
  - ReplaceString: {Offset: 0x0000, Find: "/italic/KBJ-TsukuMin%20Pr6N%20RB", Replace: "/italic/Georgia"}
  - FindBaseAddressString: "/bolditalic/KBJ-TsukuMin%20Pr6N%20RB"
  - ReplaceString: {Offset: 0x0000, Find: "/bolditalic/KBJ-TsukuMin%20Pr6N%20RB", Replace: "/bolditalic/Georgia"}


# Multi-version patch: 4.8.10956 - 4.8.10956+
Default ePub sans-serif font (Avenir):
  - Enabled: yes
  - Description: This patch changes the default ePub sans-serif font from "Kobo UD Kakugo" to "Avenir".
  # To use a different font, change "Avenir" in each of the replacement strings
  # to another font name prefix (23 letters max.). For example, change "Avenir"
  # to "Trebuchet" to use a sideloaded Trebuchet font.
  - FindBaseAddressString: "/normal/KBJ-UDKakugo%20Pr6N%20M"
  - ReplaceString: {Offset: 0x0000, Find: "/normal/KBJ-UDKakugo%20Pr6N%20M", Replace: "/normal/Avenir"}
  - FindBaseAddressString: "/bold/KBJ-UDKakugo%20Pr6N%20M"
  - ReplaceString: {Offset: 0x0000, Find: "/bold/KBJ-UDKakugo%20Pr6N%20M", Replace: "/bold/Avenir"}
  - FindBaseAddressString: "/italic/KBJ-UDKakugo%20Pr6N%20M"
  - ReplaceString: {Offset: 0x0000, Find: "/italic/KBJ-UDKakugo%20Pr6N%20M", Replace: "/italic/Avenir"}
  - FindBaseAddressString: "/bolditalic/KBJ-UDKakugo%20Pr6N%20M"
  - ReplaceString: {Offset: 0x0000, Find: "/bolditalic/KBJ-UDKakugo%20Pr6N%20M", Replace: "/bolditalic/Avenir"}


# Multi-version patch: 3.3.0 - 4.8.10956+
Default ePub symbol font (Symbol):
  - Enabled: yes
  - Description: Sets the ePub default symbol font? Don't know what this does!
  - FindBaseAddressString: "/SymbolStd.otf"
  - ReplaceString: {Offset: 0x0000, Find: "/SymbolStd.otf", Replace: "/normal/Symbol"}


# Multi-version patch: 3.3.0 - 4.8.10956+
Force user line spacing in ePubs (Part 2 of 2):
  - Enabled: yes
  # This is part 2 of 2. Also enable part 1 in libnickel.so.1.0.0.patch
  #
  # This patch prevents any line-height style set in the book's stylesheet from
  # being recognised. It will spoil the formatting of some books, but will ensure
  # that the line spacing set with the adjustment slider takes effect. (Unless
  # the publisher has used the font shorthand style; see option below.)
  - FindBaseAddressString: "\0line-height\0"
  - ReplaceString: {Offset: 0x0001, Find: "l", Replace: "_"}
  #
  # Uncomment the following two lines to also prevent the font shorthand style
  # from being recognised. The font shorthand style is not very common in ePubs,
  # but where used it can also prevent the line spacing from being adjusted.
  # Beware that this option will likely have much bigger side-effects on the
  # book's formatting, because the font shorthand style is used to set the
  # font-size, font family, and other styles in addition to line-height.
  #
  #  - FindBaseAddressString: "\0font\0"
  #  - ReplaceString: {Offset: 0x0001, Find: "f", Replace: "_"}


# Multi-version patch: 3.3.0 - 4.8.10956+
Force user font-family in ePubs (Part 2 of 2):
  - Enabled: yes
  # This is part 2 of 2. Also enable part 1 in libnickel.so.1.0.0.patch
  #
  # This patch prevents any font-family style set in the book's stylesheet from
  # being recognised. It might spoil the style of books which use multiple fonts,
  # but will ensure that the font-family set from the device menu takes effect.
  # (Unless the publisher has used the font shorthand style; see option below.)
  - FindBaseAddressString: "\0font-family\0"
  - ReplaceString: {Offset: 0x0001, Find: "f", Replace: "_"}
  #
  # Uncomment the following two lines to also prevent the font shorthand style
  # from being recognised. The font shorthand style is not very common in ePubs,
  # but where used it can also prevent the font-family from being adjusted.
  # Beware that this option will likely have much bigger side-effects on the
  # book's formatting, because the font shorthand style is used to set the
  # font-size, line-height, and other styles in addition to font-family.
  #
  #  - FindBaseAddressString: "\0font\0"
  #  - ReplaceString: {Offset: 0x0001, Find: "f", Replace: "_"}


# Multi-version patch: 3.3.0 - 4.8.10956+
Ignore ePub book Adobe XPGT stylesheet (page-template.xpgt):
  - Enabled: no
  # Not all ePubs have an Adobe XPGT stylesheet, and the ones that do often use
  # it mainly to set the page margins. Unfortunately those margins are added to
  # the page margins set via @page in the CSS stylesheet, and cannot be overidden
  # by the `ePub fixed/ajustable top/bottom margins` patch.
  #
  # This patch should cause any Adobe XPGT stylesheet in the book to be ignored,
  # but for the book's CSS stylesheet still to be used as normal.
  #
  # (You might prefer to remove the margins from the book's XPGT stylesheet
  # before sideloading, instead of using this patch. Calibre's Modify ePub plugin
  # has a useful option for doing this.)
  - FindBaseAddressString: "\0template\0"
  - ReplaceString: {Offset: 0x0001, Find: "t", Replace: "_"}



#
# The following two patches will not be useful to most people,
# don't enable them unless you are sure you need them.
#


# Multi-version patch: 3.3.0 - 4.8.10956+
Ignore ePub book CSS and Adobe XPGT stylesheets:
  - Enabled: yes
  - FindBaseAddressString: "\0stylesheet\0"
  - ReplaceString: {Offset: 0x0001, Find: "s", Replace: "_"}
  - FindBaseAddressString: "\0style-sheet\0"
  - ReplaceString: {Offset: 0x0001, Find: "s", Replace: "_"}


# Multi-version patch: 3.3.0 - 4.8.10956+
Ignore ePub TOC navpoints:
  - Enabled: yes
  - FindBaseAddressString: "\0navPoint\0"
  - ReplaceString: {Offset: 0x0001, Find: "n", Replace: "_"}

